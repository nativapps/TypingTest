<header>
    <%= render :partial => "header_view/header_admin" %>
    <h1>ROOM</h1>
    <p>Administrator</p>
</header>

<main>
  <div class="main_wrapper">
  <ul class="controls_ul clearfix" >
    <li class="last_button_control"><%= link_to image_tag("add2x.png")+"Add room", new_room_path, class:"button_control" %></li>
  </ul>
  <div class="table-wrapper checkbox">


  <%= search_form_for @search do |f| %>
    <%= f.condition_fields do |c| %>
      <%= c.attribute_fields do |a| %>
        <%= a.attribute_select %>
      <% end %>
    <%= c.predicate_select only: [:cont, :lteq, :gteq]%> 
    <%= c.value_fields do |v| %>
      <%= v.text_field :value %> 
      <%end %>
    <%end %>
    <%= f.submit %>
  <% end %>

  <%= paginate @rooms %>
    <table>
      <tr>
        <th> <%= sort_link(@search, :name) %> <i class="fas fa-sort"></i> </th>
        <th> <%= sort_link(@search, :start_date) %> <i class="fas fa-sort"></i> </th>
        <th> <%= sort_link(@search, :finish_date) %> <i class="fas fa-sort"></i> </h>
        <th> <%= sort_link(@search, :set_limit) %> <i class="fas fa-sort"></i> </th>
        <th></th>
      </tr>

      <% @rooms.each do |room| %>
        <tr>
          <td><%= room.name %></td>
          <td><%= room.start_date %></td>
          <td><%= room.finish_date %></td>
          <td><%= room.set_limit %> segundos</td>
          <td>
            <%= link_to image_tag("view2x.png")+"View",  room, class:"button_control" %>
            <%= link_to image_tag("edit2x.png")+"Edit", edit_room_path(room), class:"button_control", id:"edit" %>
            <%= link_to image_tag("delete2x.png")+"Delete",  room, method: :delete, data: {confirm: 'Â¿Do you want to delete this room?'}, class:"button_control" %>
          </td>
        </tr>
      <% end %>

    </table>

    <%= paginate @rooms %>

    <% if @rooms.blank? %>
      <h2>There are no rooms saved</h2>
    <% end %>
    </div> <!-- .table-wrapper -->
  </div><!-- .main_wrapper -->
</main>
